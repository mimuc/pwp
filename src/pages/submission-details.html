<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../sumasy-icons.html">

<dom-module id="submission-details">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                padding: 10px;

            }

            table {
                width: 100%;
            }

            paper-material {
                padding: 5px;
                width: 60px;
                margin: 5px;
            }

            .abstract {
                margin-top: 15px;

                display: block;
            }

            .single {
                display: inline-block;
                width: auto;
            }

            .multiple {
                display: inline-block;
            }

            div > paper-card {
                width: 100%;
                --paper-card-header-text: {
                    font-size: 40px;
                };
                margin-bottom: 20px;
            }

            .reviews {
                width: auto;
                display: compact;
            }

            paper-button > iron-icon {
                padding-right: 8px;
            }

        </style>
        <div class="card">
            <h2>Submission Details</h2>
            <paper-card heading="[[submission.title]]">
                <template is="dom-repeat" items="{{ possibleActions }}">
                    <paper-button>
                        <iron-icon icon="sumasy-icons:[[item.icon]]"></iron-icon>
                        [[item.text]]
                    </paper-button>
                </template>
            </paper-card>
            <paper-card>
                <div class="card-content">
                    <div class="multiple">
                        <b>Authors: </b>
                        <template is="dom-repeat" items="{{ submission.authors }}">
                            <a href="" style="text-decoration: none">
                                <paper-material class="single" elevation="2">[[item]]</paper-material>
                            </a>
                        </template>
                    </div>
                    <div class="multiple"><b>Tags: </b>
                        <template is="dom-repeat" items="{{ submission.tags }}">
                            <a href="" style="text-decoration: none">
                                <paper-material class="single" elevation="2">[[item.name]]</paper-material>
                            </a>
                        </template>
                    </div>
                    <div class="abstract">
                        <b>Abstract: </b><br>
                        [[submission.abstract]]
                    </div>
                </div>
                <div class="card-actions">
                    <br>
                    <b>Reviews</b><br>
                    <template class="reviews" is="dom-repeat" items="{{ submission.reviews }}">
                        <paper-card class="reviews">
                            <div class="card-content">
                                <paper-button>
                                    <iron-icon icon="sumasy-icons:file-download"></iron-icon>
                                    Download Review
                                </paper-button>
                            </div>
                            <div class="card-actions">
                                <b>Reviewer Score</b> [[item.reviewer.reviewerScore]]
                            </div>
                        </paper-card>
                    </template>

                </div>
            </paper-card>
            <table>
                <tr>
                    <td></td>
                    <td>Review</td>
                    <td>Score</td>
                    <td>Annotations</td>
                </tr>
                <tr>
                    <td></td>
                    <td><a href="#/review-details">Reviewer 1</a></td>
                    <td>3 (Borderline)</td>
                    <td>10</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Reviewer 2</td>
                    <td>2 (reject)</td>
                    <td>5</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Reviewer 3</td>
                    <td>5 (Strong Accept)</td>
                    <td>1</td>
                </tr>
            </table>
            <p>
                <a href="#/submission-overview">Back to Submission Overview</a>
            </p>
        </div>
    </template>

    <script>
      class SubmissionDetails extends Polymer.Element {
        static get is() {
          return 'submission-details';
        }

        static get properties() {
          return {
            submission: {
              type: Object,
              value: function () {
                return {
                  title: 'Great Paper for CHI next year',
                  paperLink: 'https://www.downloadPaper.com',
                  authors: ['Bastian Schweinsteiger', 'Jens Lehmann'],
                  abstract: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, ' +
                  'sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,' +
                  ' sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.' +
                  ' Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. ' +
                  'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod ' +
                  'tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. ' +
                  'At vero eos et accusam et justo duo dolores et ea rebum. ' +
                  'Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.',
                  status: 'accepted',
                  tags: [{name: 'password security', link: 'tag/1'}, {name: 'usability security', link: 'tag/2'}],
                  reviews: [{
                    reviewer: {
                      name: 'Konrad Bartolotti',
                      reviewerScore: 5
                    },
                    reviewLink: 'https://www.downloadReview1.com'
                  }, {
                    reviewer: {
                      name: 'Antonio Banderas',
                      reviewerScore: 3
                    },
                    reviewLink: 'https://www.downloadReview2.com'
                  }]
                }
              },
              reflectToAttribute: true,
              observer: '_submissionChanged'
            },
            possibleActions: {
              type: Array,
              value: function () {
                return [
                  {icon: 'check-circle', text: 'Accepted'},
                  {icon: 'file-download', text: 'Download Paper'},
                  {icon: 'file-upload', text: 'Update Submission'}
                ]
              }
            }
          };
        }
      }
      window.customElements.define((SubmissionDetails).is, SubmissionDetails);
    </script>
</dom-module>
