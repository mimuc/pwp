<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../shared-styles.html">
<!-- My own imports -->
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-styles/color.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<dom-module id="reviewer-overview">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
    </style>

    <div class="card">
      <!-- Header -->
      <h2>Reviewer-Overview</h2>

      <!-- Custom style for reviewer-cards-->
    <custom-style>
    <style is="custom-style">
      body {
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Roboto';
      }
      paper-card {
      max-width: 500px;
      }
      .card-header { @apply --paper-font-headline; }
      .card-light { color: var(--paper-grey-600); }
      .card-location {
    float: right;
    font-size: 15px;
    vertical-align: middle;
      }
      .card-rating{
        display:flex;
      }
      .card-reserve { color: var(--google-green-500);}
      iron-icon.star-true {
    --iron-icon-width: 16px;
    --iron-icon-height: 16px;
    color: var(--paper-amber-500);
      }
      iron-icon.star-false {
        color: var(--paper-grey-500);
        --iron-icon-width: 16px;
        --iron-icon-height: 16px;
       }
    </style>
    <!--Repeat for ech card-->
    <template is="dom-repeat" items="[[reviewers]]">
    <custom-style>
            <paper-card >
              <div class="card-actions">
                <div class="horizontal justified">
                  <!--Reviewer full name-->
                  <div class="card-header">[[item.name]] [[item.surname]]
                    <!-- Reviewer location/workplace + location icon-->
                    <div class="card-location card-light">
                      <iron-icon icon="communication:location-on"></iron-icon>
                      <span>[[item.organisation]]</span>
                    </div>
                  </div>
                </div>
              </div>
          <div class="card-content">
            <!--TODO on icon tap skillset replaced with achievements of reviewer-->
            <!--Reviewer Skillset-->
            <template is="dom-repeat" items="[[item.skills]]">
            <div class="card-rating">
              <!--create as many stars as the rating says-->
                <template is="dom-repeat" items="[[createArray(item.rating)]]">
              <iron-icon class$="star-{{item}}" icon="star"></iron-icon>
              </template>
              <div style="width:5%">
              </div>
              <!--skill name-->
              <div>[[item.name]]</div>
            </div>
          </template>
          </div>
          <div class="card-actions">
            <div class="horizontal justified">
              <!-- currently reviewing / max numbers of reviews-->
              <!--TODO if reviewing / max numbers = 1, disable "AssignPaper"-Button-->
            <span >[[item.reviewing.length]] / [[item.maxReviews]]</span>
            <!--Button: Assign reviewer a new paper to review , leads to another page-->
              <a href="#/review-request" style="text-decoration: none;" ><paper-button class="card-reserve">Assign Paper</paper-button></a>
            </div>
          </div>

        </paper-card>

    </custom-style>
  </template>

  </custom-style>
    </div>

  </template>

  <script>
    class ReviewerOverview extends Polymer.Element {
      static get is() {
        return 'reviewer-overview';
      }
      static get properties(){
        return { reviewers:{}
      };
    }
      constructor(){
        super();
        this.reviewers=[
          {name:"Peer",
          surname:"Kroeger",
          title:"Professor",
          organisation:"LMU Munich",
          skills:[{name:"Data Mining",
                    rating: 3 },
                  {name:"BioInformatics",
                    rating: 2}],
          achievements:[],
          reviewing:[{},{}],
          maxReviews:3
      },
      {name:"Arthur",
      surname:"Zimek",
      title:"Professor",
      organisation:"LMU Munich",
      skills:[{name:"Data Mining",
                rating: 4 },
              {name:"BioInformatics",
                rating: 1}],
      achievements:[],
      reviewing:[{},{}],
      maxReviews:6
    }];
      }

      createArray(n) {
        var array= new Array(5);
        for(var i=0; i<5;i++){
          if(i<n){
            array[i]=true;
          }else{
            array[i]=false;
          }
        }
        return array;
      }
    }

    window.customElements.define((ReviewerOverview).is, ReviewerOverview);
  </script>
</dom-module>
